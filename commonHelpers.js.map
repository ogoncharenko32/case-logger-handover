{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Initialize date picker\nconst datePicker = document.querySelector('.date-picker');\nflatpickr(datePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  enableTime: false,\n  onClose(selectedDates) {\n    curDate = selectedDates[0];\n    loadMapFromLS();\n    parseDaily();\n  },\n});\n\nlet caseList = new Map();\nlet curDate = new Date();\n\nconst convertDateToKey = date => date.toDateString().replace(/ /g, '');\n\nconst inputForm = document.querySelector('.input-form');\n\ninputForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const caseLink = event.target.elements.forminputcase.value;\n  const caseStatus = event.target.elements.forminputstatus.value;\n  const caseDescr = event.target.elements.forminputdescription.value;\n  const caseComment = event.target.elements.forminputtextarea.value;\n  newObj(caseLink, caseStatus, caseDescr, caseComment);\n  parseDaily();\n  inputForm.reset();\n});\n\nconst newObj = (caseLink, caseStatus, caseDescr, caseComment) => {\n  const caseObj = {\n    id: new Date().getTime(),\n    caseLink,\n    caseStatus,\n    caseDescr,\n    caseComment,\n  };\n\n  const key = convertDateToKey(curDate);\n  if (caseList.has(key)) {\n    caseList.get(key).set(caseObj.id, caseObj);\n  } else {\n    caseList.set(key, new Map());\n    caseList.get(key).set(caseObj.id, caseObj);\n  }\n  saveMapToLS(caseList);\n};\n\nconst convertObjFromMaps = maps => {\n  const objs = {};\n  maps.forEach((map, key) => {\n    objs[key] = Object.fromEntries(map);\n  });\n  return objs;\n};\n\nconst convertMapFromObj = objs => {\n  const maps = new Map();\n  for (const key in objs) {\n    maps.set(key, new Map(Object.entries(objs[key])));\n  }\n  return maps;\n};\n\nconst saveMapToLS = list =>\n  localStorage.setItem('case-list', JSON.stringify(convertObjFromMaps(list)));\n\nconst loadMapFromLS = () => {\n  const data = localStorage.getItem('case-list');\n  if (data) {\n    const objs = JSON.parse(data);\n    caseList = convertMapFromObj(objs);\n  }\n};\n\nconst addToDOM = (key, el) => {\n  const table = document.querySelector('.cases-table');\n  const newTableEl = document.createElement('li');\n  newTableEl.classList.add(key);\n  newTableEl.insertAdjacentHTML(\n    'beforeend',\n    // `<th><a href=\"${el.caseLink}\" target=\"_blank\">${el.caseLink}</a></th><th class=\"case-info\">${el.caseStatus}</th><th class=\"case-info\">${el.caseDescr}</th><th class=\"case-info\">${el.caseComment}</th><th><div class=\"case-btn-div\"><button class=\"edit-btn\" type=\"button\">Edit</button><button class=\"delete-btn\" type=\"button\">Delete</button></div></th>`\n    `<div><a href=\"${el.caseLink}\" target=\"_blank\">${el.caseLink.slice(\n      el.caseLink.lastIndexOf('/') + 1\n    )}</a></div><div><p class=\"case-info\">${\n      el.caseStatus\n    }</p></div><div><p class=\"case-info\">${\n      el.caseDescr\n    }</p></div><div><p class=\"case-info\">${\n      el.caseComment\n    }</p></div><div class=\"case-btn-div\"><button class=\"edit-btn\" type=\"button\">Edit</button><button class=\"delete-btn\" type=\"button\">Delete</button></div>`\n  );\n  table.append(newTableEl);\n};\n\nconst parseDaily = () => {\n  const todayCases = caseList.get(convertDateToKey(curDate));\n  const table = document.querySelector('.cases-table');\n  table.innerHTML = '';\n  if (todayCases) {\n    todayCases.forEach((value, key) => {\n      addToDOM(key, value);\n    });\n  }\n};\n\nconst caseTable = document.querySelector('.cases-table');\ncaseTable.addEventListener('click', event => {\n  if (event.target.nodeName !== 'BUTTON') return;\n  if (event.target.className === 'delete-btn') handleDelete(event);\n  if (event.target.className === 'edit-btn') handleEdit(event);\n});\n\nconst handleDelete = e => {\n  let confirmClosure = confirm('Are U Sure?');\n  if (!confirmClosure) {\n    return;\n  }\n\n  const btn = e.target;\n  const li = btn.parentNode.parentNode;\n  const key = li.classList[0];\n  caseList.get(convertDateToKey(curDate)).delete(key);\n  const table = document.querySelector('.cases-table');\n  table.removeChild(li);\n  saveMapToLS(caseList);\n  iziToast.show({\n    message: 'Case deleted!',\n    messageColor: 'teal',\n    color: 'red',\n    position: 'topCenter',\n    timeout: 2000,\n    iconColor: '#fff',\n    maxWidth: '432px',\n  });\n};\n\nconst handleEdit = event => {\n  const li = event.target.parentNode.parentNode;\n  openModal(li);\n};\n\nconst exportBtn = document.querySelector('.export-btn');\nexportBtn.addEventListener('click', event => {\n  const todaysCases = caseList.get(convertDateToKey(curDate));\n  let output = '';\n  todaysCases.forEach(el => {\n    output += `# ${el.caseLink.slice(el.caseLink.lastIndexOf('/') + 1)} | ${\n      el.caseStatus\n    } | ${el.caseDescr} | ${el.caseComment} \\n`;\n  });\n  navigator.clipboard.writeText(output).then(\n    iziToast.show({\n      message: 'List of cases copied to clipboard',\n      messageColor: 'teal',\n      color: 'green',\n      position: 'topCenter',\n      timeout: 2000,\n      iconColor: '#fff',\n      maxWidth: '432px',\n    })\n  );\n});\n\nloadMapFromLS();\nparseDaily();\n\nfunction openModal(value) {\n  const modalForm = document.querySelector('.js-modal-form');\n  modalForm.innerHTML = '';\n  const form = document.createElement('ul');\n  form.insertAdjacentHTML(\n    'afterbegin',\n    `<li>\n            <label class=\"modal-input-form-label\"\n              >Case<input\n                class=\"form-input modal-form-input-case\"\n                name=\"forminputcase\"\n                type=\"text\"\n                required\n            /></label>\n          </li>\n          <li>\n            <label class=\"modal-input-form-label\"\n              >Status\n              <select\n                class=\"form-input modal-form-input-status\"\n                name=\"forminputstatus\"\n                id=\"\"\n                required\n              >\n                <option value=\"Ongoing\" selected>Ongoing</option>\n                <option value=\"WFC\">WFC</option>\n                <option value=\"Escalated to T2\">Escalated to T2</option>\n                <option value=\"Pending RMA\">Pending RMA</option>\n                <option value=\"Pending for MW\">Pending for MW</option>\n                <option value=\"Resolved\">Resolved</option>\n                <option value=\"Escalated to CSM\">Escalated to CSM</option>\n                <option value=\"Escalated to RnD\">Escalated to RnD</option>\n                <option value=\"Closed\">Closed</option>\n              </select></label\n            >\n          </li>\n          <li>\n            <label class=\"modal-input-form-label\"\n              >Description<input\n                class=\"form-input modal-form-input-description\"\n                name=\"forminputdescription\"\n                type=\"text\"\n                required\n            /></label>\n          </li>\n          <li>\n            <label class=\"modal-input-form-label\"\n              >Comment<textarea\n                class=\"form-input modal-form-input-textarea form-input-textarea\"\n                name=\"forminputtextarea\"\n                type=\"text\"\n              ></textarea>\n            </label>\n          </li>`\n  );\n  modalForm.append(form);\n  form.insertAdjacentHTML(\n    'afterend',\n    `<button class=\"modal-save-btn input-form-button\" type=\"button\">\n          Save\n        </button>\n        <button class=\"modal-close-btn input-form-button\" type=\"button\">\n          Close\n          </button>`\n  );\n\n  const modal = document.querySelector('.modal');\n  const closeBtn = document.querySelector('.modal-close-btn');\n  const saveBtn = document.querySelector('.modal-save-btn');\n\n  modal.classList.remove('is-hidden');\n\n  closeBtn.addEventListener('click', closeModal);\n  saveBtn.addEventListener('click', event => updateCase(event, value));\n\n  renderModal(value);\n}\n\nfunction closeModal() {\n  const modal = document.querySelector('.modal');\n  const closeBtn = document.querySelector('.modal-close-btn');\n\n  closeBtn.removeEventListener('click', closeModal);\n\n  modal.classList.add('is-hidden');\n}\n\nfunction renderModal(obj) {\n  const key = obj.classList[0];\n  const caseObj = caseList.get(convertDateToKey(curDate)).get(key);\n  const caseEl = document.querySelector('.modal-form-input-case');\n  const caseStatus = document.querySelector('.modal-form-input-status');\n  const caseDescr = document.querySelector('.modal-form-input-description');\n  const caseComment = document.querySelector('.modal-form-input-textarea');\n  caseEl.value = caseObj.caseLink;\n  caseStatus.value = caseObj.caseStatus;\n  caseDescr.value = caseObj.caseDescr;\n  caseComment.value = caseObj.caseComment;\n}\n\nfunction updateCase(event, value) {\n  loadMapFromLS();\n\n  const caseEl = document.querySelector('.modal-form-input-case');\n  const caseStatus = document.querySelector('.modal-form-input-status');\n  const caseDescr = document.querySelector('.modal-form-input-description');\n  const caseComment = document.querySelector('.modal-form-input-textarea');\n\n  const key = value.classList[0];\n\n  const todayCases = caseList.get(convertDateToKey(curDate));\n\n  if (todayCases && todayCases.has(key)) {\n    const caseObj = todayCases.get(key);\n    caseObj.caseLink = caseEl.value;\n    caseObj.caseStatus = caseStatus.value;\n    caseObj.caseDescr = caseDescr.value;\n    caseObj.caseComment = caseComment.value;\n\n    saveMapToLS(caseList);\n\n    parseDaily();\n\n    const modal = document.querySelector('.modal');\n    modal.classList.add('is-hidden');\n  }\n  const saveBtn = document.querySelector('.modal-save-btn');\n  saveBtn.removeEventListener('click', event);\n}\n"],"names":["datePicker","flatpickr","selectedDates","curDate","loadMapFromLS","parseDaily","caseList","convertDateToKey","date","inputForm","event","caseLink","caseStatus","caseDescr","caseComment","newObj","caseObj","key","saveMapToLS","convertObjFromMaps","maps","objs","map","convertMapFromObj","list","data","addToDOM","el","table","newTableEl","todayCases","value","caseTable","handleDelete","handleEdit","li","iziToast","openModal","exportBtn","todaysCases","output","modalForm","form","modal","closeBtn","saveBtn","closeModal","updateCase","renderModal","obj","caseEl"],"mappings":"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"}